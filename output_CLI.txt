(.venv) C:\Users\adity\OneDrive\Desktop\snowfalke\DeepStack-Character-Info-Extractor>python -m cli compute-embeddings --books-dir ./stories --db-path ./db

Persistent directory does not exist. Initializing vector store...
Number of documents after splitting:  56
Sample split document:
 [Document(metadata={'story_title': 'a-mother'}, page_content='A Mother\n\nMr Holohan, assistant secretary of the Eire Abu Society, had been walking up and down Dublin for nearly a month, with his hands and pockets full of dirty pieces of paper, arranging about the series of concerts. He had a game leg and for this his friends called him Hoppy Holohan. He walked up and down constantly, stood by the hour at street corners arguing the point and made notes; but in the end it was Mrs Kearney who arranged everything.\n\nMiss Devlin had become Mrs Kearney out of spite. She had been educated in a high-class convent, where she had learned French and music. As she was naturally pale and unbending in manner she made few friends at school. When she came to the age of marriage she was sent out to many houses where her playing and ivory manners were much admired. She sat amid the chilly circle of her accomplishments, waiting for some suitor to brave it and offer her a brilliant life. But the young men whom she met were ordinary and she gave them no encouragement, trying to console her romantic desires by eating a great deal of Turkish Delight in secret. However, when she drew near the limit and her friends began to loosen their tongues about her, she silenced them by marrying Mr Kearney, who was a bootmaker on Ormond Quay.'), Document(metadata={'story_title': 'a-mother'}, page_content='He was much older than she. His conversation, which was serious, took place at intervals in his great brown beard. After the first year of married life, Mrs Kearney perceived that such a man would wear better than a romantic person, but she never put her own romantic ideas away. He was sober, thrifty and pious; he went to the altar every first Friday, sometimes with her, oftener by himself. But she never weakened in her religion and was a good wife to him. At some party in a strange house when she lifted her eyebrow ever so slightly he stood up to take his leave and, when his cough troubled him, she put the eider-down quilt over his feet and made a strong rum punch. For his part, he was a model father. By paying a small sum every week into a society, he ensured for both his daughters a dowry of one hundred pounds each when they came to the age of twenty-four. He sent the elder daughter, Kathleen, to a good convent, where she learned French and music, and afterward paid her fees at the Academy. Every year in the month of July Mrs Kearney found occasion to say to some friend:\n\n“My good man is packing us off to Skerries for a few weeks.”\n\nIf it was not Skerries it was Howth or Greystones.')]
C:\Users\adity\OneDrive\Desktop\snowfalke\DeepStack-Character-Info-Extractor\embedding_pipe.py:48: LangChainDeprecationWarning: Since Chroma 0.4.x the manual persistence method is no longer supported as docs are automatically persisted.
  vectordb.persist()
[INFO] Vector store built and persisted successfully.








(.venv) C:\Users\adity\OneDrive\Desktop\snowfalke\DeepStack-Character-Info-Extractor>python -m cli get-character-info "Devlin" --db-path ./db

[DEBUG] Loading vector store from: C:\Users\adity\OneDrive\Desktop\snowfalke\DeepStack-Character-Info-Extractor\db
[DEBUG] First-pass retrieval for character: 'Devlin'
[DEBUG] Best matching story_title: a-mother [from first-pass retrieval] 
[DEBUG] Second-pass retrieval filtered to story_title='a-mother'
[DEBUG] Sending context to LLM for structured extraction...
```json
{
  "name": "Miss Devlin (Mrs Kearney)",
  "storyTitle": "A Mother",
  "summary": "Miss Devlin, who became Mrs Kearney out of spite, was educated in a high-class convent where she learned French and music. She was naturally pale and unbending, making few friends at school. She waited for a suitor to offer her a brilliant life but ended up marrying Mr Kearney, a bootmaker. She was determined to take advantage of her daughter Kathleen's name and brought an Irish teacher to the house. She arranged for Kathleen to be the accompanist at a series of concerts organized by the Eire Abu Society, ensuring a contract for eight guineas. Mrs Kearney was assertive and protective of her daughter's rights, often clashing with the society's officials over payment and contracts.",
  "relations": [
    {
      "name": "Kathleen Kearney",
      "relation": "daughter"
    },
    {
      "name": "Mr Kearney",
      "relation": "husband"
    },
    {
      "name": "Mr Holohan",
      "relation": "acquaintance"
    },
    {
      "name": "Mr Fitzpatrick",
      "relation": "acquaintance"
    },
    {
      "name": "Miss Healy",
      "relation": "friend"
    }
  ],
  "characterType": "protagonist"
}
```